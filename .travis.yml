language: csharp
# Mono is used to build .NET on Linux--we don't need it with Core.
mono: none
# Needed to run commands in the Xenial CLI
sudo: required
# The version of Ubuntu to run the Travis virtual machine -- needed for .NET Core
dist: xenial
# Your SDK version, not your run-time version
dotnet: 2.1
script: # These commands are executed in the Travis VM just like you would on your local machine
    # Use a "cd" command to move the Travis command line prompt into your solution directory
    - cd /home/travis/build/jdmac020/decisionTime/DecisionTime/
    # Use these to build the project without tests
    - dotnet restore
    - dotnet build
    # if your project has tests, you can skip "restore" and "build" and just use "test" command
    - dotnet test
before_deploy:
    # Set up git user name and tag this commit
    - git config --local user.name jdmac020
    - git config --local user.email john.macgregor@gmail.com
    - export TRAVIS_TAG=${TRAVIS_TAG:-$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)}
    - git tag $TRAVIS_TAG
deploy:
  provider: releases
  api_key: $deploy_token
  file: /home/travis/build/jdmac020/decisionTime/DecisionTime/DecisionTime.ThrowBack/bin/Debug/netcoreapp2.0/DecisionTime.ThrowBack.dll
  skip_cleanup: true